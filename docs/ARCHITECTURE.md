# ğŸ—ï¸ Architecture Technique

> SchÃ©mas d'architecture du projet PredictionDex

## Vue d'Ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SOURCES DE DONNÃ‰ES                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¦ CSV          ğŸŒ PokÃ©API        ğŸ•·ï¸ Pokepedia (Scrapy)       â”‚
â”‚  (151 Gen1)      (Stats + Moves)   (Ã‰volutions + AffinitÃ©s)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ETL PIPELINE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. etl_init_db.py      â†’ Initialisation schÃ©ma PostgreSQL      â”‚
â”‚  2. etl_load_csv.py     â†’ Chargement CSV (151 PokÃ©mon base)     â”‚
â”‚  3. etl_enrich_pokeapi.py â†’ Enrichissement PokÃ©API              â”‚
â”‚  4. scrapy crawl         â†’ Scraping Pokepedia (moves LGPE)      â”‚
â”‚  5. etl_post_process.py  â†’ Transformations finales              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POSTGRESQL DATABASE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š 11 tables normalisÃ©es (3NF)                                 â”‚
â”‚  â”œâ”€â”€ pokemon (188)        â”œâ”€â”€ type (18)                         â”‚
â”‚  â”œâ”€â”€ pokemon_type         â”œâ”€â”€ type_effectiveness (324)          â”‚
â”‚  â”œâ”€â”€ pokemon_stats        â”œâ”€â”€ move (226)                        â”‚
â”‚  â”œâ”€â”€ pokemon_move         â”œâ”€â”€ move_category (3)                 â”‚
â”‚  â”œâ”€â”€ pokemon_species      â”œâ”€â”€ learn_method                      â”‚
â”‚  â””â”€â”€ form                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼               â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ML PIPELINE â”‚ â”‚  API REST    â”‚ â”‚  INTERFACE       â”‚
â”‚  (XGBoost)   â”‚ â”‚  (FastAPI)   â”‚ â”‚  (Streamlit)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Dataset    â”‚ â”‚ â€¢ /pokemon   â”‚ â”‚ â€¢ 7 pages        â”‚
â”‚   898k combatsâ”‚ â”‚ â€¢ /moves     â”‚ â”‚ â€¢ PrÃ©dictions    â”‚
â”‚ â€¢ 133 featuresâ”‚ â”‚ â€¢ /types     â”‚ â”‚ â€¢ Visualisations â”‚
â”‚ â€¢ Accuracy   â”‚ â”‚ â€¢ /predict   â”‚ â”‚ â€¢ Quiz types     â”‚
â”‚   88.23%     â”‚ â”‚ â€¢ /health    â”‚ â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONITORING STACK                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Prometheus (9091) â†’ Collecte mÃ©triques                      â”‚
â”‚  ğŸ“ˆ Grafana (3001)    â†’ 2 dashboards (API + Model)              â”‚
â”‚  ğŸ”¬ MLflow (5001)     â†’ Experiment tracking + Model Registry    â”‚
â”‚  ğŸ’¾ Drift Detection   â†’ Collecte donnÃ©es production             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Stack Technique

### Backend
| Composant | Technologie | Version |
|-----------|-------------|---------|
| Language | Python | 3.11 |
| Database | PostgreSQL | 15 |
| ORM | SQLAlchemy | 2.0 |
| API | FastAPI | 0.109 |
| Validation | Pydantic | 2.5 |

### Machine Learning
| Composant | Technologie | Version |
|-----------|-------------|---------|
| Model | XGBoost | 2.0 |
| Preprocessing | scikit-learn | 1.4 |
| Data | pandas | 2.2 |
| Storage | Parquet (PyArrow) | 15.0 |

### MLOps & Monitoring
| Composant | Technologie | Version |
|-----------|-------------|---------|
| Tracking | MLflow | 2.18 |
| Metrics | Prometheus | 2.47 |
| Dashboards | Grafana | 10.1 |
| CI/CD | GitHub Actions | - |

### Frontend & DevOps
| Composant | Technologie | Version |
|-----------|-------------|---------|
| Interface | Streamlit | 1.39 |
| Containers | Docker | 24+ |
| Orchestration | Docker Compose | 2+ |
| Testing | pytest | 8.0 |

## Ports des Services

| Service | Port | URL |
|---------|------|-----|
| API FastAPI | 8080 | http://localhost:8080/docs |
| Streamlit | 8502 | http://localhost:8502 |
| PostgreSQL | 5432 | - |
| Prometheus | 9091 | http://localhost:9091 |
| Grafana | 3001 | http://localhost:3001 |
| MLflow | 5001 | http://localhost:5001 |
| pgAdmin | 5050 | http://localhost:5050 |
